
<div class="container" style="margin-top: 3%;">
  <div class="row">
    <div class="col-md-4">
    </div>
    <div class="col-md-6">
 <input type="text" [(ngModel)]="searchText" (ngModelChange)="search()"
       placeholder="Search tasks  ... " />
      
       </div>
       <div class="col-md-2">
       </div>
       </div>
    <div class="row" style="margin-top:10%">
      <div class="col-sm-2"></div>
      <div class="col-sm-2">
        Priority:
        <!-- <form [formGroup]="priorityFilterForm" (ngModelChange)="filterBy('Priority')" > -->
        <select [(ngModel)]="selectedPriority" (ngModelChange)="filterBy('priority')">
          <option *ngFor="let priority of priorities" [value]='priority'>{{priority[0]}}</option>
        </select>
        </div>
        <div class="col-sm-3">
          Created :
          <input type="date" [(ngModel)]="dateCreatedString" (ngModelChange)="filterBy('createdDate')">
  
      </div>
        
        <div class="col-sm-3">
          Due :
          <!-- {{dateString}} -->
         <input type="date" [(ngModel)]="dateString" (ngModelChange)="filterBy('dueDate')">
      </div>

      <div class="col-sm-2">
        <button   style="float:left;margin-right:10px;" (click)="clear()">Clear </button>

        <app-add-tasks (createdTask)="submit($event)"></app-add-tasks>
      </div>
      
    </div>
</div>


  <table class="table" style="margin-top:3%;margin-left:20%;width:78%;">
    <thead>
      <tr>
        <th>ID<a *ngIf="!isDesc" (click)="sort('id')"><i class="fa fa-caret-down"></i></a>
          <a *ngIf="isDesc" (click)="sort('id')"> <i class="fa fa-caret-up"></i></a></th>
        <th>Priority <a *ngIf="!isDesc" (click)="sort('priority')"><i class="fa fa-caret-down"></i></a>
          <a *ngIf="isDesc" (click)="sort('priority')"> <i class="fa fa-caret-up"></i></a></th>
        <th>Title<a *ngIf="!isDesc" (click)="sort('message')"><i class="fa fa-caret-down"></i></a>
          <a *ngIf="isDesc" (click)="sort('message')"> <i class="fa fa-caret-up"></i></a></th>
        <th>Associated With<a *ngIf="!isDesc" (click)="sort('assigned_to')"><i class="fa fa-caret-down"></i></a>
          <a *ngIf="isDesc" (click)="sort('assigned_to')"> <i class="fa fa-caret-up"></i></a></th>
        <th>Created Date<a *ngIf="!isDesc" (click)="sort('created_on')"><i class="fa fa-caret-down"></i></a>
          <a *ngIf="isDesc" (click)="sort('created_on')"> <i class="fa fa-caret-up"></i></a></th>
        <th>Due Date<a *ngIf="!isDesc" (click)="sort('due_date')"><i class="fa fa-caret-down"></i></a>
          <a *ngIf="isDesc" (click)="sort('due_date')"> <i class="fa fa-caret-up"></i></a></th>
      </tr>
    </thead>
    <tbody>
      
      <tr *ngFor="let task of filteredTasks ;let i =index">
        <td>{{task.id}}</td>
        <td *ngIf="task.priority==1" style="color:white;background-color: green;">Low</td>
        <td *ngIf="task.priority==2" style="color:white;background-color: yellow;">Medium</td>
        <td *ngIf="task.priority==3" style="color:white;background-color: red;">High</td>
        <!-- <td>{{task.priority==1?'Low':task.priority==2?'Medium':'High'}}</td> -->
        <td>{{task.message}} &nbsp; &nbsp;
          <app-edit-tasks [task]=task [taskIndex]=i (editTask)="editEvent($event)" ></app-edit-tasks>
          <!-- <a (click)="editTask(i)"> <i class="fa fa-edit" ></i></a> -->
          
          &nbsp;&nbsp;&nbsp;&nbsp;<a (click)="deleteTask(i)"><i class="fas fa-trash-alt"></i></a>
        </td>
        <td> <img src={{useridToImg[task.assigned_to]}} width="50" height="50">&nbsp;&nbsp;{{task.assigned_name}}</td>
        <td>{{task.created_on}}</td>
        <td>{{task.due_date}}</td>
    </tr>
    </tbody>
  </table>
  